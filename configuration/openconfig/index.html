
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Arista Open Management repository documentation">
      
      
        <meta name="author" content="Arista Networks">
      
      
        <link rel="canonical" href="https://aristanetworks.github.io/openmgmt/configuration/openconfig/">
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../netconf/">
      
      <link rel="icon" href="../../_media/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.0.9">
    
    
      
        <title>OpenConfig Configuration - Open Management</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.material.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-4V8W728SS9"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-4V8W728SS9",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-4V8W728SS9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Open Management" class="md-header__button md-logo" aria-label="Open Management" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Open Management
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OpenConfig Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aristanetworks/openmgmt" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openmgmt on Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Open Management" class="md-nav__button md-logo" aria-label="Open Management" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Open Management
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aristanetworks/openmgmt" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openmgmt on Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          OpenConfig
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        OpenConfig
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#platform-compatibility" class="md-nav__link">
    Platform compatibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnmi" class="md-nav__link">
    gNMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#octa" class="md-nav__link">
    OCTA
  </a>
  
    <nav class="md-nav" aria-label="OCTA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-enable-octa" class="md-nav__link">
    How to enable Octa
  </a>
  
    <nav class="md-nav" aria-label="How to enable Octa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-models" class="md-nav__link">
    API models
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aaa-accounting-for-gnmiopenconfig" class="md-nav__link">
    AAA Accounting for gNMI/OpenConfig
  </a>
  
    <nav class="md-nav" aria-label="AAA Accounting for gNMI/OpenConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gnmi-per-rpc-role-authorizations" class="md-nav__link">
    gNMI per-RPC role authorizations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-aft-mapping" class="md-nav__link">
    Enable AFT mapping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telemetry-timestamps" class="md-nav__link">
    Telemetry Timestamps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-persistence" class="md-nav__link">
    Configuration Persistence
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations_1" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-openconfig-paths" class="md-nav__link">
    Supported OpenConfig paths
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-resources" class="md-nav__link">
    References / Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../netconf/" class="md-nav__link">
        NETCONF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../restconf/" class="md-nav__link">
        RESTCONF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mtls/" class="md-nav__link">
        Certificate Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        Security Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/ansible/" class="md-nav__link">
        Ansible
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          gNMI clients
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          gNMI clients
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnmi-clients/arista-gnmi/" class="md-nav__link">
        gnmi (Arista)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnmi-clients/gnmic/" class="md-nav__link">
        gnmic
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnmi-gateway/" class="md-nav__link">
        gNMI gateway
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          gNOI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          gNOI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnoi/" class="md-nav__link">
        About gNOI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnoi/gnoic/" class="md-nav__link">
        gNOIc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnoi/grpcurl/" class="md-nav__link">
        gRPCurl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnoi/gnoicode/" class="md-nav__link">
        gNOI in Golang
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/golang/" class="md-nav__link">
        Go Lang
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          NETCONF
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          NETCONF
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/netconf/" class="md-nav__link">
        About NETCONF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/netconf/ncclient/" class="md-nav__link">
        ncclient
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/netconf/netconf_over_ssh/" class="md-nav__link">
        NETCONF over SSH
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/pygnmi/" class="md-nav__link">
        Pygnmi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/pyang/" class="md-nav__link">
        Pyang
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/pyangbind/" class="md-nav__link">
        Pyangbind
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
      
      
      
        <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
          RESTCONF
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_10">
          <span class="md-nav__icon md-icon"></span>
          RESTCONF
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/restconf/" class="md-nav__link">
        About RESTCONF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/restconf/curl/" class="md-nav__link">
        cURL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/restconf/python/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/ygot/" class="md-nav__link">
        ygot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/WiFi/" class="md-nav__link">
        WiFi
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Telemetry
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Telemetry
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../telemetry/adapters/gnmireverse/" class="md-nav__link">
        gNMIReverse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../telemetry/adapters/ocprometheus/" class="md-nav__link">
        ocprometheus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../telemetry/adapters/kafka/" class="md-nav__link">
        kafka-telegraf
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../models/" class="md-nav__link">
        Models
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../videos/" class="md-nav__link">
        Videos
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#platform-compatibility" class="md-nav__link">
    Platform compatibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnmi" class="md-nav__link">
    gNMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#octa" class="md-nav__link">
    OCTA
  </a>
  
    <nav class="md-nav" aria-label="OCTA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-enable-octa" class="md-nav__link">
    How to enable Octa
  </a>
  
    <nav class="md-nav" aria-label="How to enable Octa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-models" class="md-nav__link">
    API models
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aaa-accounting-for-gnmiopenconfig" class="md-nav__link">
    AAA Accounting for gNMI/OpenConfig
  </a>
  
    <nav class="md-nav" aria-label="AAA Accounting for gNMI/OpenConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gnmi-per-rpc-role-authorizations" class="md-nav__link">
    gNMI per-RPC role authorizations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-aft-mapping" class="md-nav__link">
    Enable AFT mapping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telemetry-timestamps" class="md-nav__link">
    Telemetry Timestamps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-persistence" class="md-nav__link">
    Configuration Persistence
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations_1" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-openconfig-paths" class="md-nav__link">
    Supported OpenConfig paths
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-resources" class="md-nav__link">
    References / Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/aristanetworks/openmgmt/edit/main/docs/configuration/openconfig.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  



  <h1>OpenConfig</h1>

<h2 id="overview">Overview</h2>
<p>EOS supports the OpenConfig gNMI interface for device management.</p>
<h3 id="platform-compatibility">Platform compatibility</h3>
<p>All EOS flavors support OpenConfig (physical, virtual, containerized, cloud).</p>
<h3 id="gnmi">gNMI</h3>
<p>To start the gNMI server, which listens by default on TCP/6030 configure the gRPC transport under <code>management api gnmi</code>
in the global config mode:</p>
<p>Default VRF</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>management api gnmi
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  transport grpc openmgmt
</code></pre></div>
<p>Non-default VRF</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>management api gnmi
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>   transport grpc openmgmt
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>     vrf management
</code></pre></div>
<p>Changing the port:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>management api gnmi
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>   transport grpc openmgmt
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>      port 5900
</code></pre></div>
<p>Apply ACL</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>management api gnmi
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>   transport grpc openmgmt
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>      ip access-group ACCESS_GROUP
</code></pre></div>
<p>Note, the ACL should be a standard ACL allowing hosts or subnets.</p>
<p>Authenticate the connection with TLS</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>management api gnmi
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>   transport grpc openmgmt
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>      ssl profile PROFILE
</code></pre></div>
<p>Enable authorization of incoming requests</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>management api gnmi
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>   transport grpc openmgmt
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>      authorization requests
</code></pre></div>
<p>Status check</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>#show management api gnmi
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>Octa:               No
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>Enabled:            Yes
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>Server:             running on port 6030, in default VRF
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>SSL Profile:        none
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>QoS DSCP:           none
</code></pre></div>
<h3 id="octa">OCTA</h3>
<p>The OpenConfig agent (gNMI API) can leverage the EOS state streaming agent's (TerminAttr) libraries, thus exposing EOS
native paths. If Octa (OpenConfig + TerminAttr) is enabled then OpenConfig, in addition to accepting OpenConfig paths in
gNMI get/subscribe requests, will also support EOS native paths (for example, Sysdb/Smash paths). This feature was
introduced in <code>4.22.1F</code>.</p>
<p>gNMI requests received by Octa are interpreted as either OpenConfig or TerminAttr requests, as follows.</p>
<ul>
<li>gNMI requests containing an origin of <code>eos_native</code> are processed as as native path requests.</li>
<li>Requests lacking an origin of <code>eos_native</code> are treated as OpenConfig requests.</li>
</ul>
<p>A gNMI client that supports specification of an origin as part of the associated RPC is a requirement.</p>
<p>Note support for sending GET/SUBSCRIBE requests to both an openconfig and an eos-native path in the same call is not yet
supported.</p>
<h4 id="how-to-enable-octa">How to enable Octa</h4>
<p>Octa can be enable by adding <code>provider eos-native</code> under <code>management api gnmi</code></p>
<p><code>SW(config-mgmt-api-gnmi)#provider eos-native</code></p>
<p>Status check</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>#show management api gnmi
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Octa:               enabled
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>Enabled:            Yes
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>Server:             running on port 6030, in default VRF
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>SSL Profile:        none
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>QoS DSCP:           none
</code></pre></div>
<h5 id="api-models">API models</h5>
<p>Starting in EOS <code>4.24.0F</code> it is possible to configure the Smash paths that Octa has access to. Under the <code>management api
models</code> mode, the provider smash sub-mode allows for enabling or disabling a Smash path with the <code>[no] path
smash_path_here [disabled]</code> command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>management api models
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>   provider smash
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>      path forwarding/status
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>      path routing/status disabled
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>      path routing/isis/lsdb
</code></pre></div>
<p>Note that every time a new path is added the Octa agent has to be restarted.
EOS CLI:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>management api gnmi
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>   transport grpc &lt;NAME&gt;
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>   shutdown
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>   no shutdown
</code></pre></div>
<p>Bash:
<code>$ sudo killall Octa</code></p>
<p>Alternatively <code>agent Octa terminate</code> can be used from EOS CLI as well.</p>
<p><code>show management api models</code> will list the Smash paths enabled/disabled</p>
<p>e.g.:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>#show management api models
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>provider smash
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>  path /Smash/bridging
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>  path /Smash/forwarding/status
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>  path /Smash/routing/isis/lsdb
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>  path /Smash/routing
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>  path /Smash/routing/status disabled
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>provider sysdb
</code></pre></div>
<h2 id="aaa-accounting-for-gnmiopenconfig">AAA Accounting for gNMI/OpenConfig</h2>
<p>Starting with EOS 4.27.2F <code>accounting requests</code> can be enabled to account records for gNMI/gNOI RPCs:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>management api gnmi
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>   transport grpc default
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>      authorization requests
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>      accounting requests
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>   provider eos-native
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>!
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>aaa accounting commands all default start-stop logging
</code></pre></div>
<p>we can also use these commands to log to tacacs+ or radius and syslog too</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>aaa accounting commands all default start-stop group tacacs+
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>aaa accounting commands all default start-stop group radius
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>spine1# sh management api gnmi
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>Octa: enabled
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>Transport: default
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>Enabled: yes
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>Server: running on port 6030, in default VRF
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>SSL profile: none
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>QoS DSCP: none
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>Authorization required: yes
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>Accounting requests: yes
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>Certificate username authentication: no
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>Notification timestamp: last change time
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>Listen addresses: ::
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>spine1#
</code></pre></div>
<p>Configuration change using OpenConfig and gNMI:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>$ gnmic -a 192.168.0.10:6030 -u arista -p arista77rx --insecure set --update-path &quot;/interfaces/interface[name=Ethernet1]/config/description&quot; --update-value &quot;test&quot;
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>{
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  &quot;source&quot;: &quot;192.168.0.10:6030&quot;,
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>  &quot;timestamp&quot;: 1663615213475353999,
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>  &quot;time&quot;: &quot;2022-09-19T19:20:13.475353999Z&quot;,
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>  &quot;results&quot;: [
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>    {
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>      &quot;operation&quot;: &quot;UPDATE&quot;,
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>      &quot;path&quot;: &quot;interfaces/interface[name=Ethernet1]/config/description&quot;
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>    }
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>  ]
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>}
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>$ gnmic -a 192.168.0.10:6030 -u arista -p arista77rx --insecure get --path &quot;/interfaces/interface[name=Ethernet1]/config/description&quot;
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>[
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>  {
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    &quot;source&quot;: &quot;192.168.0.10:6030&quot;,
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    &quot;timestamp&quot;: 1663615224964145128,
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>    &quot;time&quot;: &quot;2022-09-19T19:20:24.964145128Z&quot;,
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>    &quot;updates&quot;: [
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>      {
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>        &quot;Path&quot;: &quot;interfaces/interface[name=Ethernet1]/config/description&quot;,
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>        &quot;values&quot;: {
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>          &quot;interfaces/interface/config/description&quot;: &quot;test&quot;
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>        }
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>      }
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>    ]
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>  }
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>]
</code></pre></div>
<p>Syslog messages on the device:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>spine1#sh logging last 5 minutes
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>Sep 19 19:20:13 spine1 Aaa: %ACCOUNTING-6-CMD: arista unknown unknown stop task_id=34 start_time=1663615213.48 timezone=UTC service=shell priv-lvl=15 cmd=OpenConfig.Set addr=192.168.0.1:57388 rpc=/gnmi.gNMI/Set request={&quot;update&quot;:[{&quot;path&quot;:&quot;/interfaces/interface[name=Ethernet1]/config/description&quot;,&quot;val&quot;:&quot;\\&quot;test\\&quot;&quot;}]} &lt;cr&gt;
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>Sep 19 19:20:13 spine1 ConfigAgent: %SYS-5-CONFIG_SESSION_ENTERED: User arista entered configuration session session11521733719371 on GNMI (192.168.0.1:57388)
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>Sep 19 19:20:13 spine1 ConfigAgent: %SYS-5-CONFIG_SESSION_COMMIT_SUCCESS: User arista committed configuration session session11521733719371 successfully on GNMI (192.168.0.1:57388)
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>Sep 19 19:20:13 spine1 ConfigAgent: %SYS-5-CONFIG_SESSION_EXITED: User arista exited configuration session session11521733719371 on GNMI (192.168.0.1:57388)
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>Sep 19 19:20:24 spine1 Aaa: %ACCOUNTING-6-CMD: arista unknown unknown stop task_id=35 start_time=1663615224.96 timezone=UTC service=shell priv-lvl=15 cmd=OpenConfig.Get addr=192.168.0.1:57428 rpc=/gnmi.gNMI/Get request={&quot;path&quot;:[{&quot;path&quot;:&quot;/interfaces/interface[name=Ethernet1]/config/description&quot;}]} &lt;cr&gt;
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>spine1#trace monitor octa
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>--- Monitoring /var/log/agents/Octa-3748 ---
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>I0919 19:20:13.715618    3748 router.go:234] Cli commands:
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>configure session session11521733719371
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>interface Ethernet1
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>description test
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>exit
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>configure session session11521733719371 commit
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>^Cspine1#
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>spine1#bash ps -ef | grep Octa
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>root      3748   480  2 16:51 ?        00:03:20 /usr/bin/Octa --agenttitle=Octa
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>spine1#bash  more /var/log/agents/Octa-3748 | tail -4
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>interface Ethernet1
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>description test
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>exit
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>configure session session11521733719371 commit
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>spine1#
</code></pre></div>
<h3 id="limitations">Limitations</h3>
<p>An accounting record is limited to a maximum of 8098 characters.
The record will be truncated if it exceeds the maximum character length.</p>
<h2 id="gnmi-per-rpc-role-authorizations">gNMI per-RPC role authorizations</h2>
<p>Starting in EOS <code>4.24.1F</code> it is possible to perform authorization of each RPC (that is, GET, SET, SUBSCRIBE), if
authorization requests is supplied as described above.</p>
<p>During authorization, the OpenConfig agent will communicate with the AAA agent, allowing authorization policies or roles
to permit or deny the new tokens <code>OpenConfig.Get</code> and <code>OpenConfig.Set</code>.</p>
<p>For example, a role may be defined such as:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>role oc-read
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>   10 permit command OpenConfig.Get
</code></pre></div>
<p>A user which is assigned to this role would be allowed to issue a gNMI GET or SUBSCRIBE request, but not a SET request.</p>
<blockquote>
<p>Note that this is only available for gNMI.</p>
</blockquote>
<h2 id="enable-aft-mapping">Enable AFT mapping</h2>
<p>By default, mapping of the FIB (forwarding information base) to the OpenConfig AFT (abstract forwarding table) model is
disabled, as the volume of data can be large.</p>
<p>Starting in EOS <code>4.25.1F</code> it is possible to enable these mappings, for IPV4, IPV6, or both, as described below:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>management api models
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>   provider aft
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>      ipv4-unicast
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>      ipv6-unicast
</code></pre></div>
<blockquote>
<p>Note that prior to EOS 4.27 a restart of the gNMI agent is required, e.g.: <code>agent Octa terminate</code> or
<code>agent OpenConfig terminate</code> (in case the eos-native provider is not enabled).</p>
</blockquote>
<h2 id="telemetry-timestamps">Telemetry Timestamps</h2>
<p>Per the GNMI specification, the default timestamp field of a notification message is set to be the time at which the
value of the underlying data source changes or when the reported event takes place. In order to facilitate integration
in legacy environments oriented around polling style operations, an option to support overriding the timestamp field to
the send-time is available. (as of 4.27.0F)</p>
<p>Overriding the timestamp to <code>send-time</code> is applicable to all STREAM and POLL subscriptions.</p>
<p>Configuration is outlined below.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>management api gnmi
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>   transport grpc &lt;NAME&gt;
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>      notification timestamp send-time
</code></pre></div>
<p>If there's a need to return to the standards-oriented operation, the following mechanisms can be used to reset the
behavior.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>no notification timestamp send-time
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>default notification timestamp
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>notification timestamp last-change-time
</code></pre></div>
<details><summary>Validation</summary>
<p>

<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>#show management api gnmi
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>Octa: enabled
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>Set persistence: enabled
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>Transport: default
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>Enabled: yes
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>Server: running on port 6030, in default VRF
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>SSL profile: none
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>QoS DSCP: none
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>Authorization required: no
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>Accounting requests: no
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>Certificate username authentication: no
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>Notification timestamp: send time  !! note: timestamp mode
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>Listen addresses: ::
</code></pre></div>

</p>
</details>

<h2 id="configuration-persistence">Configuration Persistence</h2>
<p>By default, within EOS, the application of gNMI <code>Set</code> RPCs are not persisted to the <code>startup-config</code>.  A <code>copy
running-config startup-config</code> is required in order to save configuration updates imposed via gNMI.</p>
<p>As of EOS 4.28.0F, if the operator desires to be able to save gNMI-driven configuration automatically, persistence can be
enabled by adding the following configuration. With this option, all gnmi <code>Set</code> operations will be saved to the
<code>startup-config</code>. Note, the configuration is saved using Arista's EOS configuration syntax and there is no corresponding
presentation of the OpenConfig syntax.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>management api gnmi
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>   transport grpc &lt;NAME&gt;
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>   operation set persistence
</code></pre></div>
<p>If there is a need to return to the default mode of gNMI configuration non-persistence, this can be disabled using the
following commands.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>no operation set persistence
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>default operation set persistence
</code></pre></div>
<details><summary>Validation</summary>
<p>

<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>#show management api gnmi
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>Octa: enabled
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>Set persistence: enabled  !! note: persistence state
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>Transport: default
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>Enabled: yes
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>Server: running on port 6030, in default VRF
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>SSL profile: none
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>QoS DSCP: none
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>Authorization required: no
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>Accounting requests: no
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>Certificate username authentication: no
<a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>Notification timestamp: last change time
<a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>Listen addresses: ::
</code></pre></div>

</p>
</details>

<h2 id="troubleshooting">Troubleshooting</h2>
<p>The OpenConfig agent handles all transports described above: gNMI, RESTCONF, and
NETCONF. The agent log file is present at <code>/var/log/agents/OpenConfig-{PID}</code>.
Lines that begin with <code>E</code> are errors. Debug logging can be enabled with a
regular trace command. Here are a couple of examples:</p>
<p><code>(config)#trace OpenConfig setting server/9</code> - For server (gNMI) traces</p>
<p><code>(config)#trace OpenConfig setting */9</code> - For all traces with verbose setting</p>
<p>similarly if Octa is enabled:</p>
<p><code>(config)#trace Octa setting server/9</code> - For server (gNMI) traces</p>
<p><code>(config)#trace Octa setting */9</code> - For all traces with verbose setting</p>
<h2 id="limitations_1">Limitations</h2>
<ul>
<li>In EOS versions prior to <code>4.24.0F</code>, not all Smash paths were accessible via Octa.</li>
<li>Starting in EOS <code>4.24.0F</code> configuring the Smash paths that Octa has access to will also affect OpenConfig. Enabling a
  Smash path for Octa can result in extra YANG paths being populated in OpenConfig. Disabling a Smash path can result in
  having some YANG paths missing in OpenConfig.</li>
<li>The <code>%&lt;zone-id&gt;</code> optional suffix in YANG <code>ietf:ipv4-address</code>, and <code>ietf:ipv6-address</code> types are not supported.</li>
<li>An OpenConfig client update/merge/replace request can erase config that is not modified by the incoming request. This
  happens if a config that is part of a certain mount point but not supported by OpenConfig is configured via CLI prior
  to the OpenConfig client update/merge/replace request is processed.</li>
</ul>
<h2 id="supported-openconfig-paths">Supported OpenConfig paths</h2>
<p>Please refer to the <a href="https://eos.arista.com/toi/">EOS Central TOIs</a> to see the new list of paths supported per release.</p>
<p>For convenience, supported paths may be found at: <a href="https://eos.arista.com/path-report">https://eos.arista.com/path-report</a>.</p>
<h2 id="references-resources">References / Resources</h2>
<ul>
<li>The OpenConfig working group: <a href="http://openconfig.net/">http://openconfig.net/</a></li>
<li>Repository of gNMI specifications: <a href="https://github.com/openconfig/reference/">https://github.com/openconfig/reference/</a></li>
</ul>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/aristanetworks/openmgmt" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.arista.com" target="_blank" rel="noopener" title="www.arista.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.4c2.2 20.4 3.3 41.8 3.3 64zm28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 21 58.2 27 94.7zm-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6zM8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zm186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6h116.7zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "content.code.copy"], "search": "../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.a00a7c5e.min.js"></script>
      
    
  </body>
</html>